/*! For license information please see beautychat-widget.js.LICENSE.txt */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("React"),require("ReactDOM"),require("styled")):"function"==typeof define&&define.amd?define(["React","ReactDOM","styled"],n):"object"==typeof exports?exports.BeautyChatWidget=n(require("React"),require("ReactDOM"),require("styled")):e.BeautyChatWidget=n(e.React,e.ReactDOM,e.styled)}(this,((e,n,r)=>(()=>{"use strict";var t={20:(e,n,r)=>{var t=r(883),o=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,r){var t,c={},s=null,l=null;for(t in void 0!==r&&(s=""+r),void 0!==n.key&&(s=""+n.key),void 0!==n.ref&&(l=n.ref),n)i.call(n,t)&&!u.hasOwnProperty(t)&&(c[t]=n[t]);if(e&&e.defaultProps)for(t in n=e.defaultProps)void 0===c[t]&&(c[t]=n[t]);return{$$typeof:o,type:e,key:s,ref:l,props:c,_owner:a.current}}n.jsx=c,n.jsxs=c},338:(e,n,r)=>{var t=r(845);n.H=t.createRoot,t.hydrateRoot},759:e=>{e.exports=r},845:e=>{e.exports=n},848:(e,n,r)=>{e.exports=r(20)},883:n=>{n.exports=e}},o={};function i(e){var n=o[e];if(void 0!==n)return n.exports;var r=o[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return i.d(n,{a:n}),n},i.d=(e,n)=>{for(var r in n)i.o(n,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},i.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};i.r(a),i.d(a,{init:()=>F});var u,c,s,l,d,f,p,y,b,h,x,v=i(883),m=i.n(v),g=i(338),w=i(759),j=i.n(w),O=i(848);function S(){var e,n,r="function"==typeof Symbol?Symbol:{},t=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,t,o,i){var c=t&&t.prototype instanceof u?t:u,s=Object.create(c.prototype);return E(s,"_invoke",function(r,t,o){var i,u,c,s=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,r){return i=n,u=0,c=e,f.n=r,a}};function p(r,t){for(u=r,c=t,n=0;!d&&s&&!o&&n<l.length;n++){var o,i=l[n],p=f.p,y=i[2];r>3?(o=y===t)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=r<2&&p<i[1])?(u=0,f.v=t,f.n=i[1]):p<y&&(o=r<3||i[0]>t||t>y)&&(i[4]=r,i[5]=t,f.n=y,u=0))}if(o||r>1)return a;throw d=!0,t}return function(o,l,y){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,y),u=l,c=y;(n=u<2?e:c)||!d;){i||(u?u<3?(u>1&&(f.n=-1),p(u,c)):f.n=c:f.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((n=(d=f.n<0)?c:r.call(t,f))!==a)break}catch(n){i=e,u=1,c=n}finally{s=1}}return{value:n,done:d}}}(r,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var l=[][t]?n(n([][t]())):(E(n={},t,(function(){return this})),n),d=s.prototype=u.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,E(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=s,E(d,"constructor",s),E(s,"constructor",c),c.displayName="GeneratorFunction",E(s,o,"GeneratorFunction"),E(d),E(d,o,"Generator"),E(d,t,(function(){return this})),E(d,"toString",(function(){return"[object Generator]"})),(S=function(){return{w:i,m:f}})()}function E(e,n,r,t){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}E=function(e,n,r,t){if(n)o?o(e,n,{value:r,enumerable:!t,configurable:!t,writable:!t}):e[n]=r;else{var i=function(n,r){E(e,n,(function(e){return this._invoke(n,r,e)}))};i("next",0),i("throw",1),i("return",2)}},E(e,n,r,t)}function k(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,n,r,t,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?n(c):Promise.resolve(c).then(t,o)}function A(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(t=i.call(r)).done)&&(u.push(t.value),u.length!==n);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,n)||T(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,n){if(e){if("string"==typeof e)return P(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,n):void 0}}function P(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}function R(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var C=j().div(u||(u=R(["\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  z-index: 1000;\n  font-family: Arial, sans-serif;\n"]))),I=j().button(c||(c=R(["\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background-color: #E5A4B3;\n  color: white;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);\n  transition: transform 0.2s;\n  font-size: 24px;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n"]))),U=j().div(s||(s=R(["\n  position: absolute;\n  bottom: 70px;\n  right: 0;\n  width: 350px;\n  height: 500px;\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n"]))),B=j().div(l||(l=R(["\n  padding: 15px;\n  background-color: #E5A4B3;\n  color: white;\n  font-weight: bold;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),$=j().button(d||(d=R(["\n  background: none;\n  border: none;\n  color: white;\n  font-size: 20px;\n  cursor: pointer;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),M=j().div(f||(f=R(["\n  flex: 1;\n  overflow-y: auto;\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n"]))),q=j().div(p||(p=R(["\n  margin-bottom: 10px;\n  padding: 12px;\n  border-radius: 15px;\n  max-width: 80%;\n  align-self: ",";\n  background-color: ",";\n  color: ",";\n"])),(function(e){return e.$isUser?"flex-end":"flex-start"}),(function(e){return e.$isError?"#ffebee":e.$isUser?"#E5A4B3":"#f1f1f1"}),(function(e){return e.$isError?"#c62828":e.$isUser?"white":"black"})),z=j().div(y||(y=R(["\n  padding: 15px;\n  border-top: 1px solid #eee;\n  display: flex;\n  gap: 10px;\n"]))),D=j().input(b||(b=R(["\n  flex: 1;\n  padding: 12px;\n  border: 1px solid #ddd;\n  border-radius: 20px;\n  outline: none;\n  font-size: 14px;\n\n  &:focus {\n    border-color: #E5A4B3;\n  }\n\n  &:disabled {\n    background-color: #f5f5f5;\n    cursor: not-allowed;\n  }\n"]))),G=j().button(h||(h=R(["\n  padding: 8px 20px;\n  background-color: ",";\n  color: white;\n  border: none;\n  border-radius: 20px;\n  cursor: ",";\n  font-size: 14px;\n  transition: background-color 0.2s;\n\n  &:hover:not(:disabled) {\n    background-color: #d48a99;\n  }\n"])),(function(e){return e.disabled?"#ccc":"#E5A4B3"}),(function(e){return e.disabled?"not-allowed":"pointer"})),N=j().div(x||(x=R(["\n  text-align: center;\n  padding: 10px;\n  color: #666;\n  font-style: italic;\n"]))),W=function(){var e=A(v.useState(!1),2),n=e[0],r=e[1],t=A(v.useState([{text:"Hello! I'm your beauty product advisor. I can help you find the perfect products for your skin type and concerns. What would you like to know?",isUser:!1}]),2),o=t[0],i=t[1],a=A(v.useState(""),2),u=a[0],c=a[1],s=A(v.useState(!1),2),l=s[0],d=s[1],f=v.useRef(null);v.useEffect((function(){f.current&&f.current.scrollIntoView({behavior:"smooth"})}),[o]);var p=function(){var e,n=(e=S().m((function e(n){var r,t,o,a,s,f,p,y;return S().w((function(e){for(;;)switch(e.n){case 0:if(n.preventDefault(),u.trim()&&!l){e.n=1;break}return e.a(2);case 1:return r={text:u,isUser:!0},i((function(e){return[].concat(k(e),[r])})),c(""),d(!0),e.p=2,t=new AbortController,o=setTimeout((function(){return t.abort()}),3e4),e.n=3,fetch("https://beauty-chatbot-ai-p1fp.onrender.com/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:u}),signal:t.signal});case 3:if(a=e.v,clearTimeout(o),a.ok){e.n=4;break}throw new Error("Server responded with status: ".concat(a.status));case 4:return e.n=5,a.json();case 5:s=e.v,f={text:s.response,isUser:!1},i((function(e){return[].concat(k(e),[f])})),e.n=7;break;case 6:e.p=6,y=e.v,console.error("Error:",y),p={text:y instanceof Error&&"AbortError"===y.name?"Sorry, the request timed out. Please try again.":"Sorry, there was an error processing your request. Please try again later.",isUser:!1,isError:!0},i((function(e){return[].concat(k(e),[p])}));case 7:return e.p=7,d(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[2,6,7,8]])})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){_(i,t,o,a,u,"next",e)}function u(e){_(i,t,o,a,u,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,O.jsx)(C,{children:n?(0,O.jsxs)(U,{children:[(0,O.jsxs)(B,{children:[(0,O.jsx)("div",{children:"Beauty Advisor"}),(0,O.jsx)($,{onClick:function(){return r(!1)},children:"✕"})]}),(0,O.jsxs)(M,{children:[o.map((function(e,n){return(0,O.jsx)(q,{$isUser:e.isUser,$isError:e.isError,children:e.text},n)})),l&&(0,O.jsx)(N,{children:"Thinking..."}),(0,O.jsx)("div",{ref:f})]}),(0,O.jsx)("form",{onSubmit:p,children:(0,O.jsxs)(z,{children:[(0,O.jsx)(D,{type:"text",value:u,onChange:function(e){return c(e.target.value)},placeholder:"Type your message...",disabled:l}),(0,O.jsx)(G,{type:"submit",disabled:l,children:"Send"})]})})]}):(0,O.jsx)(I,{onClick:function(){return r(!0)},children:"💬"})})};function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"beauty-chat-widget",n=document.getElementById(e);n||((n=document.createElement("div")).id=e,document.body.appendChild(n)),(0,g.H)(n).render((0,O.jsx)(m().StrictMode,{children:(0,O.jsx)(W,{})}))}return window.BeautyChatWidget={init:F},a})()));